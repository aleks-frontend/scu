<!DOCTYPE html>
<html lang="en" style="background: white;">
  <head>    
    <link type="text/css" rel="stylesheet" href="globals.css" />
    <link type="text/css" rel="stylesheet" href="main.css" />
    <style type="text/css">      
      .test {
        background-image: url('https://outfit-v2-exports-production.s3-accelerate.amazonaws.com/media_library_items/64a8d2329950e4c876f4477c5184156a/39abb0922fe21b5c527107ca8e451528.png');
        opacity: 0.75;
      }

      .signature {
        background-image: url({{{ signature }}});
      }

      .roleContent::after {
        content: '{{{ role }}}';
      }

      .url::after {
        content: '{{{ url }}}';
      }

      {{{account.snippets.font}}}

      h1, h2 {
        font-family: var(--headingFont);
        font-weight: var(--headingWeight);
        text-transform: none !important;
      }
    </style>
  </head>
  <body data-team="{{{team.name}}}" data-logo="">      

    {{ #spreadsheet.certificates }}
    <div class="page">
      <div class="bleed">
        <div class="test contain"></div>
        <div class="fit">
          <div class="wrapper">
            <div class="inner">
              <div class="appendcode"></div>             
              <h2>This is to certify</h2>
              <div class="main">
                <div class="name">

                  <h2 class="blank">{{{ name }}}</h2>
                  <p>of<br />
                    {{{ school }}}</p>
                </div>
                <div class="certification">                    
                </div>
                <div class="duration">
                  <label>has participated in</label><br />
                  <p>Southern Cross University Head-Start</p>
                  <p>{{{ certification }}}</p>
                </div>
              </div>

              <div class="date">
                <p class="blank">{{{ date }}}</p>
                <label>Date</label>
              </div>

              <div class="copyright">
                <h4 class="url"></h4>
                <p class="code">CRICOS Provider Code: 01241G</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{ /spreadsheet.certificates }}

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
      window.showCrop = {{showCrop}}{{^showCrop}}false{{/showCrop}};

                                                        if (showCrop) {
                                                          document.querySelector('body').classList.add('crop');
                                                        }

                                                        var cropImage = 'https://outfit-v2-exports-production.s3-accelerate.amazonaws.com/media_library_items/bdb964a7c7fdc5ebc8bbde9204b62464/crop.svg'

                                                        Array.prototype.slice.call(document.querySelectorAll('.page'))

                                                          .forEach(function(page) {
                                                          var parser = new DOMParser();
                                                          page.style.cssText = 'overflow: hidden; position: relative; height: 100vh; width: 100vw';

                                                          var cropString = (
                                                            '<div class="crop-marks">' +
                                                            '<img style="height: 28.81px; width: 28.81px; position: absolute; top: 0; left: 0;" src="'+cropImage+'">' +
                                                            '<img style="height: 28.81px; width: 28.81px; transform: rotate(90deg); position: absolute; top: 0; right: 0;" src="'+cropImage+'">' +
                                                            '<img style="height: 28.81px; width: 28.81px; transform: rotate(180deg); position: absolute; bottom: 0; right: 0;" src="'+cropImage+'">' +
                                                            '<img style="height: 28.81px; width: 28.81px; transform: rotate(270deg); position: absolute; bottom: 0; left: 0;" src="'+cropImage+'">' +
                                                            '</div>'
                                                          )

                                                          var cropNode = parser.parseFromString(cropString, "text/html").body.firstChild;

                                                          !!window.showCrop && page.insertBefore(cropNode, null);
                                                        }
                                                                  );

                                                        Array.prototype.slice.call(document.querySelectorAll('.bleed'))
                                                          .forEach(function(bleed){
                                                          bleed.style.cssText = !!window.showCrop ?
                                                            'position: absolute; top: 4.41mm; right: 4.41mm; bottom: 4.41mm; left: 4.41mm;'
                                                          :
                                                          'position: absolute; top: -3mm; right: -3mm; bottom: -3mm; left: -3mm'
                                                        });

                                                        var text = {
                                                          appendcode: '<div style="margin-bottom: 10pt; height: 80pt;"><img style="height: 100%;" src="{{{lockup-logo}}}"></div>'
                                                        };

                                                        appendText('appendcode');

                                                        function appendText(input) {
                                                          var nodeList = document.getElementsByClassName(input);
                                                          var nodeArray = Array.from(nodeList)	

                                                          nodeArray.forEach(function(node) {
                                                            node.innerHTML = text[input];
                                                          });
                                                        }

    </script>
    <script>
      function checkLimitedText() {
        Array.prototype.slice.call(document.querySelectorAll('.text-limited'))
          .forEach(function(e) {
          const height = $(e).height();          	
          const maxHeight = $(e).data('limit') 
          ? parseFloat($(e).data('limit'))
          : $(e).css('max-height');

          $(e)
            .css('max-height', 'none')
            .attr('data-limit', maxHeight);

          if (height > maxHeight) {
            e.classList.add("overflow");
          } else {
            e.classList.remove("overflow");
          }
        });
      } setInterval(checkLimitedText, 1000);

      $(window).bind("load", function() {
        // Document has been loaded..
      });



    </script>
  </body>
</html>